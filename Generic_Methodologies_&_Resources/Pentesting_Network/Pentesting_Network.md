**Discovering hosts from the outside** <br>

This is going to be a **brief section** about how to find **IPs responding** from the **Internet.**
In this situation you have some **scope of IPs** (maybe even several **ranges**) and you just to find **which Ps are responding.**

**ICMP** <br>

This is the **easiest** and **fastest** way to discover if a host is up or not.<br>
You could try to send some **ICMP** packets and **expect responses.** The easiest way is just sending an **echo request** and expect from the response. You can do that using a simple pingor using  *fping* for **ranges.** <br>

You could also use **nmap** to send other types of ICMP packets (this will avoid filters to common ICMP echo request-response).

      ping -c 1 199.66.11.4    # 1 echo request to a host
      fping -g 199.66.11.0/24  # Send echo requests to ranges
      nmap -PE -PM -PP -sn -n 199.66.11.0/24 #Send echo, timestamp requests and subnet mask requests

**TCP Port Discovery** <br>

It's very common to find that all kind of ICMP packets are being filtered. Then, all you can do to check if a host is up is **try to find open ports.** Each host has **65535 ports,** so, if you have a "big" scope you **cannot** test if **each port** of each host is open or not, that will take too much time.
Then, what you need is a **fast port scanner** ([masscan](https://github.com/robertdavidgraham/masscan))and a list of the **ports more used:**

     #Using masscan to scan top20ports of nmap in a /24 range (less than 5min)
     masscan -p20,21-23,25,53,80,110,111,135,139,143,443,445,993,995,1723,3306,3389,5900,8080 199.66.11.0/24

You could also perform this step with *nmap*, but it slower and somewhat *nmap* has problems identifying hosts up.

**HTTP Port Discovery** <br>

This is just a TCP port discovery useful when you want to focus on discovering HTTP services:
    
     masscan -p80,443,8000-8100,8443 199.66.11.0/24

**UDP Port Discovery**<br>

You could also try to check for some **UDP port open** to decide if you should **pay more attention** to a **host.** As UDP services usually **don't respond** with **any data** to a regular empty UDP probe packet it is difficult to say if a port is being filtered or open. The easiest way to decide this is to send a packet related to the running service, and as you don't know which service is running, you should try the most probable based on the port number:

    nmap -sU -sV --version-intensity 0 -F -n 199.66.11.53/24
    # The -sV will make nmap test each possible known UDP service packet
    # The "--version-intensity 0" will make nmap only test the most probable

The nmap line proposed before will test the **top 1000 UDP ports** in every host inside the /24 range but even only this will take **20min.** If need **fastest results** you can use [udp-proto-scanner:](https://github.com/CiscoCXSecurity/udp-proto-scanner) .**/udp-proto-scanner.pl 199.66.11.53/24**This will send these **UDP probes** to their **expected port** (for a /24 range this will just take 1 min): *DNSStatusRequest, DNSVersionBindReq, NBTStat, NTPRequest, RPCCheck, SNMPv3GetRequest, chargen, citrix, daytime, db2, echo, gtpv1, ike,ms-sql, ms-sql-slam, netop, ntp, rpc, snmp-public, systat, tftp, time, xdmcp.*

**SCTP Port Discovery** <br>

       #Probably useless, but it's pretty fast, why not try it?
       nmap -T4 -sY -n --open -Pn <IP/range>

**Pentesting Wifi** <br>
Here you can find a nice guide of all the well known Wifi attacks at the time of the writing:

Pentesting Wifi

**Discovering hosts from the inside**<br>

If you are inside the network one of the first things you will want to do is to discover other hosts. Depending on how much noise you can/want to do, different actions could be performed:

**Passive** <br>

You can use these tools to passively discover hosts inside a connected network:

       netdiscover -p
       p0f -i eth0 -p -o /tmp/p0f.log
       # Bettercap
       net.recon on/off #Read local ARP cache periodically
       net.show
       set net.show.meta true #more info

**Active**<br>
Note that the techniques commented in (Discovering hosts from the outside) *(TCP/HTTP/UDP/SCTP Port Discovery)* can be also *applied here.*
But, as you are in the **same network** as the other hosts, you can do **more things:**

       #ARP discovery
        nmap -sn <Network> #ARP Requests (Discover IPs)
        netdiscover -r <Network> #ARP requests (Discover IPs)

        #NBT discovery
        nbtscan -r 192.168.0.1/24 #Search in Domain

        # Bettercap
        net.probe on/off #Discover hosts on current subnet by probing with ARP, mDNS, NBNS, UPNP, and/or WSD
        set net.probe.mdns true/false #Enable mDNS discovery probes (default=true)
        set net.probe.nbns true/false #Enable NetBIOS name service discovery probes (default=true)
        set net.probe.upnp true/false #Enable UPNP discovery probes (default=true)
        set net.probe.wsd true/false #Enable WSD discovery probes (default=true)
        set net.probe.throttle 10 #10ms between probes sent (default=10)

        #IPv6
        alive6 <IFACE> # Send a pingv6 to multicast.

**Active ICMP** 
